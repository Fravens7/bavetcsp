<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Test Supabase Job Posts</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

  <h1>Ofertas de Trabajo desde Supabase</h1>
  <div id="job-listings"></div>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const supabaseUrl = 'https://hxnikfmwknlxmkqcsrol.supabase.co';
      const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh4bmlrZm13a25seG1rcWNzcm9sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1OTUwNTksImV4cCI6MjA3NTE3MTA1OX0.G2b3hFEvpvOFpiFFk_a2os-7mFOgsZz6pj_YMihvv5A';
      const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

      const container = document.getElementById('job-listings');

      try {
        const { data: jobs, error } = await supabaseClient.from('job_posts').select('*');
        if (error) throw error;

        if (!jobs || jobs.length === 0) {
          container.innerHTML = '<p>No hay ofertas disponibles.</p>';
          return;
        }

        container.innerHTML = jobs.map(job => `
          <div>
            <h3>${job.title}</h3>
            <p>${job.description}</p>
          </div>
        `).join('');
      } catch (err) {
        container.innerHTML = `<p>Error al cargar datos: ${err.message}</p>`;
      }
    });
  </script>

</body>
</html>

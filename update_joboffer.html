<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Test Supabase Job Posts</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

  <h1>Ofertas de Trabajo desde Supabase</h1>
  <div id="job-listings"></div>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const supabaseUrl = 'https://hxnikfmwknlxmkqcsrol.supabase.co';
      const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh4bmlrZm13a25seG1rcWNzcm9sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1OTUwNTksImV4cCI6MjA3NTE3MTA1OX0.G2b3hFEvpvOFpiFFk_a2os-7mFOgsZz6pj_YMihvv5A';
      const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

      const container = document.getElementById('job-listings');

      try {
        const { data: jobs, error } = await supabaseClient.from('job_posts').select('*');
        if (error) throw error;

        if (!jobs || jobs.length === 0) {
          container.innerHTML = '<p>No hay ofertas disponibles.</p>';
          return;
        }

container.innerHTML = jobs.map(job => `
  <div class="job-card" style="border:1px solid #ccc; padding: 10px; margin-bottom: 10px;">
    <h3>${job.title}</h3>
    <p><strong>Departamento:</strong> ${job.department}</p>
    <p><strong>Tipo:</strong> ${job.type}</p>
    <p><strong>Ubicación:</strong> ${job.location}</p>
    <p><strong>Descripción:</strong> ${job.description}</p>

    <h4>Responsabilidades:</h4>
    <ul>
      ${(job.responsibilities || '').split('\n').map(item => `<li>${item.trim()}</li>`).join('')}
    </ul>

    <h4>Requisitos:</h4>
    <ul>
      ${(job.requirements || '').split('\n').map(item => `<li>${item.trim()}</li>`).join('')}
    </ul>

    <h4>Beneficios:</h4>
    <ul>
      ${(job.benefits || '').split('\n').map(item => `<li>${item.trim()}</li>`).join('')}
    </ul>

    <p><strong>Modalidad de trabajo:</strong> ${job.work_setup}</p>
  </div>
`).join('');

        
      } catch (err) {
        container.innerHTML = `<p>Error al cargar datos: ${err.message}</p>`;
      }
    });
  </script>

</body>
</html>
